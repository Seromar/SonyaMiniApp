<!-- modules/module2/test1.html -->

<style>
    .test-container {
        max-height: 80vh;
        overflow-y: auto;
        padding-right: 10px;
    }

    h2 {
        text-align: center;
        color: #fff;
    }

    .section {
        background-color: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .section h3 {
        margin-top: 0;
        color: #333;
    }

    .quiz-question {
        margin-bottom: 20px;
    }

    .quiz-question label {
        display: block;
        margin-bottom: 5px;
        color: #333;
        font-weight: bold;
    }

    .quiz-question input[type="text"],
    .quiz-question select {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 16px;
    }

    .submit-btn {
        display: block;
        width: 100%;
        padding: 12px;
        background-color: #28a745;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 20px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .submit-btn:hover {
        background-color: #218838;
    }

    .feedback {
        margin-top: 25px;
        padding: 20px;
        border-radius: 10px;
        background-color: #d4edda;
        color: #155724;
        display: none;
        font-size: 18px;
    }
</style>

<div class="test-container">
    <h2>Тест 1: Advanced Verb Tenses</h2>
    
    <div class="section">
        <!-- Вопрос 1 -->
        <div class="quiz-question">
            <label>1. Choose the correct form: If she ___ (to finish) her work early, she would have joined us for dinner.</label>
            <select id="q1">
                <option value="">Выберите ответ</option>
                <option value="had finished">had finished</option>
                <option value="finished">finished</option>
                <option value="has finished">has finished</option>
            </select>
        </div>
        
        <!-- Вопрос 2 -->
        <div class="quiz-question">
            <label>2. Fill in the blank: By this time next year, I ___ (to live) in London for five years.</label>
            <input type="text" id="q2" placeholder="Например, will have been living">
        </div>
        
        <!-- Вопрос 3 -->
        <div class="quiz-question">
            <label>3. How do you form the Past Perfect Continuous tense?</label>
            <select id="q3">
                <option value="">Выберите ответ</option>
                <option value="had + been + глагол-ing">had + been + глагол-ing</option>
                <option value="have + been + глагол-ing">have + been + глагол-ing</option>
                <option value="had + глагол-ed">had + глагол-ed</option>
            </select>
        </div>
        
        <!-- Вопрос 4 -->
        <div class="quiz-question">
            <label>4. Rewrite the sentence in Present Perfect Continuous: "They started building the bridge in 2018 and it's still not finished."</label>
            <input type="text" id="q4" placeholder="Например, They have been building the bridge since 2018 and it's still not finished.">
        </div>
        
        <!-- Вопрос 5 -->
        <div class="quiz-question">
            <label>5. Choose the correct form: If I ___ (to know) about the traffic, I would have left earlier.</label>
            <select id="q5">
                <option value="">Выберите ответ</option>
                <option value="had known">had known</option>
                <option value="knew">knew</option>
                <option value="have known">have known</option>
            </select>
        </div>
        
        <!-- Вопрос 6 -->
        <div class="quiz-question">
            <label>6. Fill in the blank: She ___ (to work) here since she graduated.</label>
            <input type="text" id="q6" placeholder="Например, has been working">
        </div>
        
        <!-- Вопрос 7 -->
        <div class="quiz-question">
            <label>7. Choose the correct form: By the time you arrive, we ___ (to finish) our dinner.</label>
            <select id="q7">
                <option value="">Выберите ответ</option>
                <option value="will have finished">will have finished</option>
                <option value="have finished">have finished</option>
                <option value="will finish">will finish</option>
            </select>
        </div>
        
        <!-- Вопрос 8 -->
        <div class="quiz-question">
            <label>8. Convert to Past Perfect Continuous: "She was reading the book when I called."</label>
            <input type="text" id="q8" placeholder="Например, She had been reading the book when I called.">
        </div>
        
        <!-- Вопрос 9 -->
        <div class="quiz-question">
            <label>9. Choose the correct form: If they ___ (to leave) earlier, they would have caught the train.</label>
            <select id="q9">
                <option value="">Выберите ответ</option>
                <option value="had left">had left</option>
                <option value="left">left</option>
                <option value="have left">have left</option>
            </select>
        </div>
        
        <!-- Вопрос 10 -->
        <div class="quiz-question">
            <label>10. Fill in the blank: By the end of this month, I ___ (to study) English for six years.</label>
            <input type="text" id="q10" placeholder="Например, will have been studying">
        </div>
        
        <button class="submit-btn" onclick="checkTest3()">Проверить тест</button>
        <div class="feedback" id="test3-feedback"></div>
    </div>
</div>

<script>
    // Функция проверки теста 1 для Модуля 2
    function checkTest3() {
        const answers = {
            q1: 'had finished',
            q2: 'will have been living',
            q3: 'had + been + глагол-ing',
            q4: 'they have been building the bridge since 2018 and it\'s still not finished',
            q5: 'had known',
            q6: 'has been working',
            q7: 'will have finished',
            q8: 'she had been reading the book when i called',
            q9: 'had left',
            q10: 'will have been studying'
        };

        let score = 0;
        let totalQuestions = Object.keys(answers).length;

        for (let key in answers) {
            let userInput = document.getElementById(key).value.trim().toLowerCase();
            let correctAnswer = answers[key].toLowerCase();

            // Для вопросов с несколькими правильными вариантами можно добавить дополнительные проверки
            if (key === 'q4') {
                // Проверка наличия основных частей
                if (userInput.includes("have been building") && userInput.includes("since 2018") && userInput.includes("still not finished")) {
                    score++;
                    document.getElementById(key).style.borderColor = '#28a745';
                    continue;
                }
            }

            if (key === 'q8') {
                if (userInput.includes("had been reading the book") && userInput.includes("when i called")) {
                    score++;
                    document.getElementById(key).style.borderColor = '#28a745';
                    continue;
                }
            }

            if (userInput === correctAnswer) {
                score++;
                document.getElementById(key).style.borderColor = '#28a745'; // Зеленый
            } else {
                document.getElementById(key).style.borderColor = '#dc3545'; // Красный
            }
        }

        const feedback = document.getElementById('test3-feedback');
        feedback.style.display = 'block';
        feedback.textContent = `Вы ответили правильно на ${score} из ${totalQuestions} вопросов.`;

        // Дополнительные сообщения о результате
        if (score === totalQuestions) {
            feedback.textContent += ' Отличная работа!';
        } else if (score >= totalQuestions * 0.7) {
            feedback.textContent += ' Хороший результат!';
        } else {
            feedback.textContent += ' Потренируйтесь ещё.';
        }
    }
</script>