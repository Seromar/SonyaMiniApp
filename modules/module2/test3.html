<!-- modules/module2/test3.html -->

<style>
    .test-container {
        max-height: 80vh;
        overflow-y: auto;
        padding-right: 10px;
    }

    h2 {
        text-align: center;
        color: #fff;
    }

    .section {
        background-color: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .section h3 {
        margin-top: 0;
        color: #333;
    }

    .quiz-question {
        margin-bottom: 20px;
    }

    .quiz-question label {
        display: block;
        margin-bottom: 5px;
        color: #333;
        font-weight: bold;
    }

    .quiz-question input[type="text"],
    .quiz-question select {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 16px;
    }

    .submit-btn {
        display: block;
        width: 100%;
        padding: 12px;
        background-color: #28a745;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 20px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .submit-btn:hover {
        background-color: #218838;
    }

    .feedback {
        margin-top: 25px;
        padding: 20px;
        border-radius: 10px;
        background-color: #d4edda;
        color: #155724;
        display: none;
        font-size: 18px;
    }
</style>

<div class="test-container">
    <h2>Тест 3: Advanced Conditional Structures</h2>
    
    <div class="section">
        <!-- Вопрос 1 -->
        <div class="quiz-question">
            <label>1. Choose the correct form: If I ___ (to have) more time, I would have completed the project.</label>
            <select id="q1">
                <option value="">Выберите ответ</option>
                <option value="had">had</option>
                <option value="have">have</option>
                <option value="has">has</option>
            </select>
        </div>
        
        <!-- Вопрос 2 -->
        <div class="quiz-question">
            <label>2. Fill in the blank: If they ___ (to know) about the traffic, they wouldn't have been late.</label>
            <input type="text" id="q2" placeholder="Например, had known">
        </div>
        
        <!-- Вопрос 3 -->
        <div class="quiz-question">
            <label>3. What is the correct mixed conditional form for the sentence: "He didn't exercise, so he is out of shape now."</label>
            <input type="text" id="q3" placeholder="Например, If he had exercised, he wouldn't be out of shape now.">
        </div>
        
        <!-- Вопрос 4 -->
        <div class="quiz-question">
            <label>4. Choose the correct modal verb: If you ___ (should, must, could) see her, tell her to call me.</label>
            <select id="q4">
                <option value="">Выберите ответ</option>
                <option value="should">should</option>
                <option value="must">must</option>
                <option value="could">could</option>
            </select>
        </div>
        
        <!-- Вопрос 5 -->
        <div class="quiz-question">
            <label>5. Fill in the blank with the correct form: If I ___ (to be) you, I would have taken that opportunity.</label>
            <input type="text" id="q5" placeholder="Например, were">
        </div>
        
        <!-- Вопрос 6 -->
        <div class="quiz-question">
            <label>6. Choose the correct form: If she ___ (to study) harder, she would have passed the exam.</label>
            <select id="q6">
                <option value="">Выберите ответ</option>
                <option value="had studied">had studied</option>
                <option value="studied">studied</option>
                <option value="has studied">has studied</option>
            </select>
        </div>
        
        <!-- Вопрос 7 -->
        <div class="quiz-question">
            <label>7. Convert to Mixed Conditional: "They didn't invest in stocks, so they aren't wealthy now."</label>
            <input type="text" id="q7" placeholder="Например, If they had invested in stocks, they would be wealthy now.">
        </div>
        
        <!-- Вопрос 8 -->
        <div class="quiz-question">
            <label>8. Choose the correct modal verb: If he ___ (might, should, must) come to the meeting, inform him in advance.</label>
            <select id="q8">
                <option value="">Выберите ответ</option>
                <option value="should">should</option>
                <option value="might">might</option>
                <option value="must">must</option>
            </select>
        </div>
        
        <!-- Вопрос 9 -->
        <div class="quiz-question">
            <label>9. Fill in the blank: If you ___ (to leave) earlier, you would be here by now.</label>
            <input type="text" id="q9" placeholder="Например, had left">
        </div>
        
        <!-- Вопрос 10 -->
        <div class="quiz-question">
            <label>10. Choose the correct mixed conditional form: "If I ___ (to know) about the concert, I would be attending it tonight."</label>
            <select id="q10">
                <option value="">Выберите ответ</option>
                <option value="had known">had known</option>
                <option value="knew">knew</option>
                <option value="has known">has known</option>
            </select>
        </div>
        
        <button class="submit-btn" onclick="checkTest3()">Проверить тест</button>
        <div class="feedback" id="test3-feedback"></div>
    </div>
</div>

<script>
    // Функция проверки теста 3 для Модуля 2
    function checkTest3() {
        const answers = {
            q1: 'had',
            q2: 'had known',
            q3: 'if he had exercised, he wouldn\'t be out of shape now',
            q4: 'should',
            q5: 'were',
            q6: 'had studied',
            q7: 'if they had invested in stocks, they would be wealthy now',
            q8: 'should',
            q9: 'had left',
            q10: 'had known'
        };

        let score = 0;
        let totalQuestions = Object.keys(answers).length;

        for (let key in answers) {
            let userInput = document.getElementById(key).value.trim().toLowerCase();
            let correctAnswer = answers[key].toLowerCase();

            // Дополнительные проверки для некоторых вопросов
            if (key === 'q3') {
                if (userInput === 'if he had exercised, he wouldn\'t be out of shape now' ||
                    userInput === 'if he had exercised he wouldn\'t be out of shape now') {
                    score++;
                    document.getElementById(key).style.borderColor = '#28a745';
                    continue;
                }
            }

            if (key === 'q7') {
                if (userInput === 'if they had invested in stocks, they would be wealthy now' ||
                    userInput === 'if they had invested in stocks they would be wealthy now') {
                    score++;
                    document.getElementById(key).style.borderColor = '#28a745';
                    continue;
                }
            }

            if (userInput === correctAnswer) {
                score++;
                document.getElementById(key).style.borderColor = '#28a745'; // Зеленый
            } else {
                document.getElementById(key).style.borderColor = '#dc3545'; // Красный
            }
        }

        const feedback = document.getElementById('test3-feedback');
        feedback.style.display = 'block';
        feedback.textContent = `Вы ответили правильно на ${score} из ${totalQuestions} вопросов.`;

        // Дополнительные сообщения о результате
        if (score === totalQuestions) {
            feedback.textContent += ' Отличная работа!';
        } else if (score >= totalQuestions * 0.7) {
            feedback.textContent += ' Хороший результат!';
        } else {
            feedback.textContent += ' Потренируйтесь ещё.';
        }
    }
</script>